#!/bin/sh
# ABOUTME: Git LFS post-commit hook - only runs if repo uses LFS
# ABOUTME: Skips execution for repos without .gitattributes LFS patterns

# Skip if git-lfs not installed
command -v git-lfs >/dev/null 2>&1 || exit 0

# Skip if no .gitattributes with LFS patterns exists in the repo
if ! git ls-files -z '*.gitattributes' 2>/dev/null | xargs -0 grep -q 'filter=lfs' 2>/dev/null; then
    exit 0
fi

git lfs post-commit "$@"
